# 设计模式汇总

### 单例模式
简述：某一个对象在整个模块功能中只会出现一次，就像我们日常使用的全局变量一样
实际场景：登录页面中的登录窗口，一个某种东西（策略）的生成器
关键词： `全局唯一` `避免浪费` `重复使用`


### 策略模式
简述： 实现一个小功能的方法有多种，我们可以把这些方法都封装起来，根据实际情况灵活地进行调用。
最佳实践：可以封装一个通用的策略管理器，策略和对应的口令可以动态传入，然后再根据口令去调用。
实战场景：表单校验器的封装，封装不同对不同类型字段的校验
关键词：`消除if-else` `策略与环境的分离` `策略可复用`

### 代理模式
简述： 在请求者与接收者之间架设一个代理者。有保护代理，也有虚拟代理。 

实战场景：代理实现缓存、惰性加载中的代理(代理负责应对应访问，收集请求，待依赖下载完后再交付执行)、远程代理，保护代理（没有权限的时候，不允许访问）、写时复制代理(进行不可逆)

关键词：`代理与本体对外接口一致` 
```js
let createProxyFactory = function(){
    let cache = {}; // 缓存器
    return function(){
        let args = Array.prototype.join,call(arguements,','); // 使用当前请求的参数作为key，也就是只要参数一样，就会取出一样的结果
        if(args in cache){
            return cache[args]; //取出缓存结果
        }
        return cache[args] = fn.apply(this,arguments); // 根据 参数组成的key set值到缓存器中去。
    }
}
```


### 迭代器模式
描述：一些有先后顺序的策略，按照先后添加到遍历器中，执行遍历器的时候，相当于依次输出策略的执行。
实战场景：实现一个兼容多种浏览器的上传插件

关键词：`外部迭代器与内部迭代器` `强顺序相关的策略模式` `自动执行，不需要设置key` `每一种策略对外的接口一致便于执行`

### 发布订阅模式
描述：又叫做观察者模式，定义一种一对多的关系，当一个对象的状态发生变化的时候，所有依赖于它的对象都得到通知。
最佳实践：事件订阅模式是经典的订阅发布模式。在实现过程中，双方完全不需要知道对方的内部结构，仅仅通过“中转”交互。
实战场景：1️⃣ Vue数据的双向绑定。 2️⃣  购物车与订单  3️⃣ 当一个模块的数据发生变化，需要更新到多个模块的时候(eventBus)
关键词：`避免轮询` `订阅者发布者分离` `事件中转站` `中转站作为接口` `先发布后订阅`


### 命令模式
描述：主张讲一个操作封装为一个命令类(或者闭包)，所有的命令对象对外的接口都统一，而后制作一个命令管理器，维护一个堆栈记录命令执行的先后，进而实现执行效果的回撤，命令的延迟执行。
最佳实践：1️⃣ 连续动画的操作 2️⃣ 下棋游戏的一个个步骤 3️⃣ FRS地图模式的各种异步操作
关键词: `宏命令` `行为延迟` `行为回撤`

### 组合模式
描述：命令的组合，类似于宏命令嵌套子命令，层层嵌套，形成一个类似于树状结构的组合关系。关键点还是在，所有命令(宏命令与子命令)对外的接口都要一样。  
最佳实践：组合模式不是父子关系，是一个HAS-A关系，而不是IS-A关系。若一个对象，在超过一个分支下都出现了，则不适合使用组合模式。  
实战场景：1️⃣ 文件夹管理关系  2️⃣ 组织关系树管理  
关键词 :`部分-整体层次结构` `各层级同等对待`


### 模板方法模式
描述：大白话说就是Java的接口模式，接口类中生名了一些列的方法，子类必须去实现，然后也有一些final的方法去负责流程的调度。   
最佳实践： 1️⃣ 使用Java的接口类  2️⃣ 使用Javascript声明一些方法，内部抛出错误，逼迫子类必须去重写 3️⃣ 好莱坞原则：使用闭包作为父类，子类传入子类的实现作为参数，父类接受到参数结合内部的整合，返回一个对象构造器，子类再用于实例化实现。   
实战场景：1️⃣ 实现一个饮料冲泡的例子
关键词：`接口类` `模板`  `子类可以通过传参，父类结合参数返回构造器，实现向上转型`


### 享元模式
描述：当一个功能中需要创建大量的相同对象的时候，对象的大部分属性也都是相同的，只需要利用部分传入参数改变不一样属性值得时候，可以考虑只创建一个这样类型的实例，然后通过修改实例化后的对象的属性，实现对对象的重用。
最佳实践：1️⃣ 区分好内部状态与外部状态的区别  2️⃣ 需要享元模式 和 对象池模式结合
实战场景：
1️⃣ 超多个文件上传，需要通过一个文件管理对象，创建对应的DOM对象时候，针对一种上传模式只需要创建一个文件管理对象。比如都包括 filename、size等属性。  
2️⃣ 地图模块的marker点，第一次搜索结果需要画10个点，创建10个marker对象。第二次搜索结果需要画15个，我们就可以重用上一次已经创建的十个点。(前后两次结果不叠加显示)

### 职责链条模式
描述：当多解决一个问题的策略有多个，但是当前只有一个是合适的，而且多种策略之间是存在着业务的先后关系的。A ==> B ==> C 条件逐渐放宽，在使用条件分支的时候，就像是一条链条。
最佳实践：1️⃣ 用于消除长长的条件分支与语句 2️⃣ 首先也是要基于每一种策略的封装，然后自检测，若失败则让下一层去执行 3️⃣ 使用一个中转者，和方法借用实现责任链上前后任务的解耦 4️⃣ 使用堆栈管理任务，可以实现责任链中的异步操作  5️⃣ 也可以使用 AOP fn.after fn.before 实现职责链
实战场景：1️⃣ 电商网站根据会员的等级不一样，对同一个商品的售卖行为不一样