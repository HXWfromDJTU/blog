# 单点登录 <span style="font-size:16px">single-sign-on</span>

>所谓的单点登录是指用户在一个站点登录后,切换到另一个站点时也自动后者的Server判断为已经登录，反过来，只要用户在一个站点登出，另一个站点的状态也要更新为退出。    


### 非跨一级域名 
若不是跨一级域名的情况，比如说`map.baidu.com`和`tieba.baidu.com`，只需要在登录其中一个网站的时候，将user信息放入domain为`.baidu.com`的cookie中，则`xxx.baidu.com`下所有的网站都可以收到这个cookie，结合cookie+session或者cookie+token的机制，维持用户的登录状态。



### 跨一级域名
例如阿里巴巴收购了微博，马爸爸想要实现一个功能，用户在微博登录后，其后登录淘宝网站的时候，也能够自动登录上同一个账号。(我们这里为了简化场景，不讨论微博账号和淘宝账号的关联问题，假设使用的就是同一套用户系统)

##### 隐匿跳转法   
同样使用`非跨域名`的cookie法，在访问A站点的时候，服务端为A设置了cookie，马上又重定向到B站点，并且为B站点也设置带用户信息的cookie。最后再重定向回到A站点。   

通过这样的一次隐匿跳转，就能够实现对两个站点的cookie设置，自然就可以成功顺利登陆两个网站。       



##### passport

还有另外一种跨主站的登录状态共享，可以采用类似`Passport`的策略去实现。   
